# リモートフォワーディング

ソース管理が社内ネットワーク上にあるGitとかSVNで管理している場合、  
（外部から接続できない環境である場合）  
外部のサーバーからは、当然そのGitなりSVNは見えないので、  
直接cloneなりチェックアウトができない。  
WinSCPなどでアップする事が必要になり、やや面倒くさい。
  
外部のサーバーから、  
開発の社内にあるGit（またはSVN）につなぎたい。  
  
# 今回の想定とする環境

```
ローカル開発サーバー  （開発現場のISP内）
    |
踏み台サーバー（開発ISPからは繋がる想定）
    |-- 開発Front -- 開発DB
    |-- 本番Front -- 本番DB -- redis、キャッシュサーバーとか
    `-- 他、zabixx監視とか。
```
自分のPCに[Vagrant+VirtualBoxでローカル開発環境を作り](ローカル開発環境構築)そこを中心に開発する。  
踏み台サーバーには開発現場のIPが許可されている。（接続可能である）  
踏み台サーバーから開発、本番にそれぞれデプロイする  

# 手順

* 開発現場のネットワーク上にあるPCで、ローカル開発環境を準備する。  
[ローカル開発環境構築](ローカル開発環境構築)  

* ユーザーフォルダ直下に「.ssh」フォルダを作る  

```
cd ~ && mkdir .ssh
```
* sshのコンフィグファイルを作る  

```
cd ~ && vi ./.ssh/config  
```
コンフィグ内容  
```
Host [踏み台サーバーのIPアドレスとか]  
    User [ユーザーアカウント]  
    HostName [踏み台サーバーのIPアドレスとかネーム]  
    RemoteForward [GitのIPとかを書く]  
```

* 作ったコンフィグファイルのパーミッションを変える。  

```
cd ~ && chmod 600 ./.ssh/config  
```

* sshでローカルから踏み台サーバーに繋ぐ。  

```
ssh [踏み台サーバーのIPアドレスとかネーム]  
```

これで、[踏み台サーバーのIPアドレスとかネーム]上からGitにアクセスできるようになる。  